(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{480:function(t,e,o){var content=o(506);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(29).default)("33d0fe4c",content,!1,{sourceMap:!1})},505:function(t,e,o){"use strict";o(480)},506:function(t,e,o){var n=o(28)(!1);n.push([t.i,".login{display:flex;justify-content:center;align-items:center;height:100%}.router-link-active{text-decoration:none}.login-form{border-radius:6px;background:#fff;width:400px;padding:25px 25px 5px}.el-input,.el-input input{height:38px}.input-icon{height:39px;width:14px;margin-left:2px}.login-tip{font-size:13px;text-align:center;color:#bfbfbf}.login-code{width:33%;height:38px;float:right}.login-code img{cursor:pointer;vertical-align:middle}.el-login-footer{height:40px;line-height:40px;position:fixed;bottom:0;width:100%;text-align:center;color:#fff;font-family:Arial;font-size:12px;letter-spacing:1px}.login-code-img{height:38px}",""]),t.exports=n},781:function(t,e,o){"use strict";o.r(e);o(97),o(93),o(190);var n=o(191),l=o(52),r={data:function(){return{loginForm:{username:"",password:"",code:"",uuid:""},codeUrl:"",loginRules:{username:[{required:!0,trigger:"blur",message:"请输入您的账号"}],password:[{required:!0,trigger:"blur",message:"请输入您的密码"}],code:[{required:!0,trigger:"change",message:"请输入验证码"}]},loading:!1,captchaEnabled:!0}},created:function(){void 0!==Object(l.a)()?this.$router.push("/"):""!=this.$route.query.id&&(1==this.$route.query.id?this.$message.error("请先登录！"):2==this.$route.query.id&&this.$message.success("修改成功!请登录!"),this.$router.push("/userlogin")),this.getCode()},methods:{getCode:function(){var t=this;Object(n.f)().then((function(e){t.captchaEnabled=void 0===e.captchaEnabled||e.captchaEnabled,t.captchaEnabled&&(t.codeUrl="data:image/gif;base64,"+e.img,t.loginForm.uuid=e.uuid)}))},openWxamp:function(){var t=window.open("/wxamp","Campus","width=400,height=700,left=30,top=10"),e=setInterval((function(){t.closed&&(clearInterval(e),window.location.reload())}),3)},handleLogin:function(){var t=this;this.$refs.loginForm.validate((function(e){e&&(t.loading=!0,Object(n.h)(t.loginForm).then((function(e){t.setCookies(e),window.location.reload()})).catch((function(e){t.loading=!1,t.captchaEnabled&&t.getCode()})))}))},setCookies:function(t){Object(l.c)(t.token)}}},c=(o(505),o(18)),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"ss"},[o("div",{staticClass:"grid-content bg-purple-dark"},[o("div",{staticClass:"login"},[o("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:t.loginForm,rules:t.loginRules}},[o("h3",{staticClass:"title"},[t._v("校园论坛")]),t._v(" "),o("el-form-item",{attrs:{prop:"username"}},[o("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:t.loginForm.username,callback:function(e){t.$set(t.loginForm,"username",e)},expression:"loginForm.username"}},[o("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"user"},slot:"prefix"})],1)],1),t._v(" "),o("el-form-item",{attrs:{prop:"password"}},[o("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin.apply(null,arguments)}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}},[o("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"password"},slot:"prefix"})],1)],1),t._v(" "),t.captchaEnabled?o("el-form-item",{attrs:{prop:"code"}},[o("el-input",{staticStyle:{width:"63%"},attrs:{"auto-complete":"off",placeholder:"验证码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin.apply(null,arguments)}},model:{value:t.loginForm.code,callback:function(e){t.$set(t.loginForm,"code",e)},expression:"loginForm.code"}},[o("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"validCode"},slot:"prefix"})],1),t._v(" "),o("div",{staticClass:"login-code"},[o("img",{staticClass:"login-code-img",attrs:{src:t.codeUrl},on:{click:t.getCode}})])],1):t._e(),t._v(" "),o("el-form-item",[o("router-link",{staticClass:"router-link-active",staticStyle:{float:"left"},attrs:{to:{path:"Resetpassword"}}},[o("el-link",{attrs:{type:"danger"}},[t._v("忘记密码？")])],1),t._v(" "),o("span",{staticClass:"router-link-active",staticStyle:{float:"right"},on:{click:t.openWxamp}})],1),t._v(" "),o("el-form-item",{staticStyle:{width:"100%"}},[o("el-button",{staticStyle:{width:"100%"},attrs:{loading:t.loading,size:"medium",type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin.apply(null,arguments)}}},[t.loading?o("span",[t._v("登 录 中...")]):o("span",[t._v("登 录")])]),t._v(" "),o("div",{staticStyle:{float:"right"}},[o("router-link",{staticClass:"link-type",attrs:{to:"/register"}},[t._v("立即注册")])],1)],1)],1)],1)])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{SvgIcon:o(189).default})}}]);