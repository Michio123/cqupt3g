(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{440:function(e,t,o){var content=o(452);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(29).default)("662a6ece",content,!1,{sourceMap:!1})},451:function(e,t,o){"use strict";o(440)},452:function(e,t,o){var l=o(28)(!1);l.push([e.i,".email-code{width:33%;height:38px;float:right}.email-code img{cursor:pointer;vertical-align:middle;height:38px}",""]),e.exports=l},463:function(e,t,o){"use strict";o.r(t);o(97);var l=o(191),r={props:{user:{type:Object}},data:function(){return{emailRules:{email:[{required:!0,message:"邮箱地址不能为空",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]},{required:!0,validator:function(e,t,o){Object(l.b)(t).then((function(e){!0===e.data?o():o(new Error("邮箱已经存在"))}))},trigger:"blur"}],password:[{required:!0,message:"密码不能为",trigger:"blur"}],code:[{required:!0,message:"验证码不能为空",trigger:"blur"}]},emailForm:{password:"",email:"",code:"",uuid:""},codeUrl:"",loading:!1,isShow:!1,count:0}},created:function(){this.getCode()},watch:{user:function(e,t){this.emailForm.email=this.handleCampusUrl(e.avatar)}},methods:{getCode:function(){var e=this;Object(l.f)().then((function(t){e.captchaEnabled=void 0===t.captchaEnabled||t.captchaEnabled,e.captchaEnabled&&(e.codeUrl="data:image/gif;base64,"+t.img,e.emailForm.uuid=t.uuid)}))},handleEmail:function(){var e=this;this.$refs.emailForm.validate((function(t){t&&(e.loading=!0,Object(l.a)(e.emailForm).then((function(t){e.$message({message:t.msg,type:"success"}),e.loading=!1,e.getCode(),e.verification()})).catch((function(){e.loading=!1,e.getCode()})))}))},verification:function(){var e=this;this.isShow=!0,this.count=60;var t=setInterval((function(){e.count--,e.count<=0&&(e.isShow=!1,clearInterval(t))}),1e3)}}},n=(o(451),o(18)),component=Object(n.a)(r,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{ref:"emailForm",attrs:{model:e.emailForm,rules:e.emailRules}},[o("h3",[e._v("密码验证")]),e._v(" "),o("el-form-item",{attrs:{prop:"password"}},[o("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.emailForm.password,callback:function(t){e.$set(e.emailForm,"password",t)},expression:"emailForm.password"}},[o("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"password"},slot:"prefix"})],1)],1),e._v(" "),o("el-form-item",{attrs:{prop:"email"}},[o("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"邮箱"},model:{value:e.emailForm.email,callback:function(t){e.$set(e.emailForm,"email",t)},expression:"emailForm.email"}},[o("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"user"},slot:"prefix"})],1)],1),e._v(" "),o("el-form-item",{attrs:{prop:"code"}},[o("el-input",{staticStyle:{width:"63%"},attrs:{"auto-complete":"off",placeholder:"验证码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEmail.apply(null,arguments)}},model:{value:e.emailForm.code,callback:function(t){e.$set(e.emailForm,"code",t)},expression:"emailForm.code"}},[o("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"validCode"},slot:"prefix"})],1),e._v(" "),o("div",{staticClass:"email-code"},[o("img",{staticClass:"email-code-img",attrs:{src:e.codeUrl},on:{click:e.getCode}})])],1),e._v(" "),o("el-form-item",{staticStyle:{width:"100%"}},[o("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.loading,size:"medium",type:e.isShow?"info":"primary",disabled:e.isShow},nativeOn:{click:function(t){return t.preventDefault(),e.handleEmail.apply(null,arguments)}}},[e.loading?o("span",[e._v("请 求 中...")]):o("span",[e._v(e._s(e.isShow?e.count:"开始绑定"))])])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{SvgIcon:o(189).default})}}]);